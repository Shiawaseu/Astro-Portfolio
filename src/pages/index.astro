---
import '@/styles/globals.css';
import MenuBar from '@/components/MenuBar/MenuBar.astro';
import CommonHeader from '@/components/Headers/CommonHeader.astro';
import ProjectCard from '@/components/ProjectCard/ProjectCard.astro';
import WorkExperienceCard from '@/components/WorkExperienceCard/WorkExperienceCard.astro';
import BlurFade from '@/components/ui/blur-fade';
import TypingAnimation from "@/components/ui/typing-animation";
import Expertise from "@/content/configurations/expertise.mdx";
import Section from '@/components/Section/Section.astro';

const projectFiles = await Astro.glob('../content/projects/*.mdx');
const projectsToDisplay = projectFiles.slice(0, 4);

const experienceFiles = await Astro.glob('../content/WorkExperience/*.mdx');
const experienceFilesToDisplay = experienceFiles.slice(0, 4);
---

<html lang="en">
  <CommonHeader />
  <body class="min-h-screen">
    <div class="flex flex-col pt-20">
      <div class="mx-auto w-full max-w-3xl space-y-5 mb-16">
        <div class="flex justify-between gap-4">
          <div class="flex flex-col overflow-hidden max-w-[550px] p-4">
            <BlurFade client:load className="font-bold text-4xl sm:text-5xl">
              Hi! I'm Shiawase ðŸ‘‹ 
            </BlurFade>
            <BlurFade client:load delay={0.4}>
              <TypingAnimation client:load
                className="text-lg sm:text-xl mt-1"
                text="Full-stack developer and cybersecurity enthusiast, learning and building in my free time, based in Saudi Arabia ðŸ’š"
                duration={10}
              />
            </BlurFade>
          </div>
          <div class="relative flex-shrink-0 w-36 h-36 sm:w-44 sm:h-44 max-w-full max-h-full">
            <BlurFade client:load delay={0.6}>
              <img src="/assets/me.png" alt="Profile Picture" class="rounded-full border" />
            </BlurFade>
          </div>
        </div>

        <BlurFade client:load delay={0.8}>
          <Section title="Skills">
            <Expertise names="all" filter="skills" />
          </Section>
        </BlurFade>

        <BlurFade client:load delay={1.0}>
          <Section title="Tools">
            <Expertise names="all" filter="tools" />
          </Section>
        </BlurFade>

        <BlurFade client:load delay={1.2}>
          <Section title={`Projects (${projectFiles.length})`}>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {projectsToDisplay.map((project) => (
                <ProjectCard 
                  title={project.frontmatter.title}
                  description={project.frontmatter.description}
                  date={project.frontmatter.date}
                  imageSrc={project.frontmatter.img_logo.src}
                  imageAlt={project.frontmatter.img_logo.alt}
                  slug={project.frontmatter.slug}
                />
              ))}
            </div>
          </Section>
        </BlurFade>

        <BlurFade client:load delay={1.4}>
          <Section title="Work Experience">
            <div class="space-y-4">
              {experienceFilesToDisplay.map((experience) => (
                <WorkExperienceCard 
                  title={experience.frontmatter.title}
                  description={experience.frontmatter.description}
                  date={experience.frontmatter.date}
                  imageSrc={experience.frontmatter.img_logo.src}
                  imageAlt={experience.frontmatter.img_logo.alt}
                  role={experience.frontmatter.role}
                />
              ))}
            </div>
          </Section>
        </BlurFade>
      </div>
    </div>
    <MenuBar />
  </body>
</html>
